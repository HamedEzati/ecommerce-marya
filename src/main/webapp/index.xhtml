<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
>

<h:head>

</h:head>
<style>
    a{
        text-decoration: none;
        color: black;
    }
   #catStyle{
       display: flex;
       align-items: center;
       justify-content: center;
   }
   #catStyle>li{
       position: relative;
       padding: 30px;
       list-style-type:none;
       text-decoration: none;
       background-color: rgba(97,96,96,0.3);
       border-radius: 5px;
       margin: 20px;
       text-align: justify;
    /*color: black;*/
       box-shadow: 5px 10px rgba(99,99,99,0.1);
   }
   #catStyle>li:hover  #subCat{
      display: block;
   }
   #subCat{
       top:80px;
       display: none;
       position: absolute;
       background-color: rgba(97,96,96,0.5);
       list-style-type: none;
       border-radius: 5px;
       padding: 10px;
       text-decoration: none;
       color: black;
   }
   #subCat > a {
       border-bottom: 1px solid gray;
       text-decoration: none;
       color: black;
   }
   #nav{
       background-color: #f8f9fa;
       box-shadow: 5px 10px 10px rgba(99,99,99,0.1);
       border: 0.2px solid darkgray;
       border-radius: 6px;
   }
   #navUl{
       display: flex;

   }
   #navUl>li{
       padding: 10px;
       list-style-type: none;
   }
   #navUl>li:hover{
       background-color: rgba(92,92,92,0.2);
       border-radius: 5px;

   }
   #logo{
       width: 160px;
       height: 70px;

       float: right;
       box-shadow:5px 10px 10px rgba(99,99,99,0.1);
   }
   #logo>img{
       width: 100%;
       height: 100%;
       border-radius: 10px;
   }

.product{
        border: 1px solid darkgray;
        border-radius: 10px;
        margin: 13px;

}
    .product-name{
        display: block;
        /*float: right*/
    ;
    }
    #detailProduct>img{
        border-radius: 20px;
    }
    #detailProduct>*{
        display: inline;
        /*float: right;*/
        justify-content: center;
        align-items: center;
        text-align: center;

    }
    #detailProduct> button{
        display: inline;
        /*float: right;*/
        justify-content: center;
        align-items: center;
        text-align: center;
    }
    #priceDetail>*{
        text-align: center;
        display: block;
    }
    #productImge{
        border-radius: 20px;
    }
    .ui-carousel .ui-carousel-viewport .ui-carousel-items .ui-carousel-item{
        width: 410px!important;
    }
    .ui-widget-header{
        background-color: #4e555b!important;
        background: none;
        border-color: #4e555b;
    }
</style>
<h:body>
    <nav id="nav">
        <div id ='logo'>

            <img src="logo.jpeg"></img>

        </div>
        <ul id = 'navUl'>
            <li>
                <a href="index.xhtml"> Home</a>
            </li>
            <li>
                <a href="#.xhtml"> about Us</a>
            </li>
            <li>
                <a href="dashbord.xhtml"> Login</a>
            </li>
        </ul>
    </nav>
    <ul id="catStyle">
        <ui:repeat value="#{categoryPublicController.parents}" var="category">
            <li>
                <h:link value="#{category.name}">
                    <f:param name="id" value="#{category.id}"/>
                </h:link>
                <ul id ="subCat">
                    <ui:repeat value="#{category.subcategories}" var="subCategory1Id"
                               rendered="#{not empty category.subcategories}">
                        <li>
                            <c:set var="subCategory1" value="#{categoryPublicController.get(subCategory1Id)}"/>
                            <h:link style="text-decoration: none" value="#{subCategory1.name}">
                            </h:link>
                        </li>
                    </ui:repeat>
                </ul>
            </li>
        </ui:repeat>
    </ul>

<!--    <div class="product-list-container">-->
<!--            <div class="product-box" style="width: 100px">-->
<!--            <ui:repeat value="#{productPublicController.all}" var="product">-->
<!--                <c:set var="productCategory" value="#{categoryPublicController.get(product.categoryId)}"/>-->
<!--                <p class="name">#{product.name}</p>-->
<!--                <p class="product-category">#{productCategory.name}</p>-->
<!--                <p class="image"><img src="${product.imageUrl}" alt="" style="width: 100%"/></p>-->
<!--                <p class="description">#{product.description}</p>-->
<!--                <p class="price">#{product.price}</p>-->
<!--                <p class="quantity">#{product.quantity}</p>-->
<!--                <button type="button" onclick="addProductToCard(#{product.id})">add</button>-->
<!--            </ui:repeat>-->
<!--        </div>-->
<!--    </div>-->
    <ui:repeat value="#{categoryPublicController.all}" var="">
        <p:carousel value="#{productPublicController.all}" var="product" responsive="true" >
            <div class="product">
                <div  id ='detailProduct' class="product-grid-item p-p-5">
                    <div  class="product-grid-item-top">
                        <div>
                            <i class=" product-category-icon"/>
                            <span class="product-category">#{productCategory.name}</span>
                        </div>
                        <!--                <span class="product-badge status-#{product.inventoryStatus.name().toLowerCase()}">#{product.inventoryStatus.text}</span>-->
                    </div>
                    <div class="product-grid-item-content">
                        <p id = 'productImge' class="image"><img src="${product.imageUrl}" alt="" style="width: 100%"/></p>
                        <div class="product-name">#{product.name}</div>

                    </div>
                    <div>
                        <div class="product-description">#{product.description}</div>
                    </div>
                    <div id = 'priceDetail' class="product-grid-item-bottom">
                        <h:outputText value="#{product.price}" styleClass="product-price">
                            <f:convertNumber currencySymbol="$" type="currency"/>
                            <button style="text-align: center" type="button" onclick="addProductToCard(#{product.id})">add</button>
                        </h:outputText>
                        <div>
                            <button style="text-align: center" type="button" onclick="addProductToCard(#{product.id})">add</button>
                        </div>

                    </div>
                </div>
            </div>
        </p:carousel>
    </ui:repeat>
<!--    <p:carousel value="#{productPublicController.all}" var="product" responsive="true" >-->
<!--    <div class="product">-->
<!--        <div  id ='detailProduct' class="product-grid-item p-p-5">-->
<!--            <div  class="product-grid-item-top">-->
<!--                <div>-->
<!--                    <i class=" product-category-icon"/>-->
<!--                    <span class="product-category">#{productCategory.name}</span>-->
<!--                </div>-->
<!--&lt;!&ndash;                <span class="product-badge status-#{product.inventoryStatus.name().toLowerCase()}">#{product.inventoryStatus.text}</span>&ndash;&gt;-->
<!--            </div>-->
<!--            <div class="product-grid-item-content">-->
<!--                <p id = 'productImge' class="image"><img src="${product.imageUrl}" alt="" style="width: 100%"/></p>-->
<!--                <div class="product-name">#{product.name}</div>-->

<!--            </div>-->
<!--            <div>-->
<!--                <div class="product-description">#{product.description}</div>-->
<!--            </div>-->
<!--            <div id = 'priceDetail' class="product-grid-item-bottom">-->
<!--                <h:outputText value="#{product.price}" styleClass="product-price">-->
<!--                    <f:convertNumber currencySymbol="$" type="currency"/>-->
<!--                    <button style="text-align: center" type="button" onclick="addProductToCard(#{product.id})">add</button>-->
<!--                </h:outputText>-->
<!--                <div>-->
<!--                    <button style="text-align: center" type="button" onclick="addProductToCard(#{product.id})">add</button>-->
<!--                </div>-->

<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    </p:carousel>-->
<!--    <p:carousel value="#{productPublicController.all}" var="product" responsive="true" >-->
<!--        <div class="product">-->
<!--            <div  id ='detailProduct' class="product-grid-item p-p-5">-->
<!--                <div  class="product-grid-item-top">-->
<!--                    <div>-->
<!--                        <i class=" product-category-icon"/>-->
<!--                        <span class="product-category">#{productCategory.name}</span>-->
<!--                    </div>-->
<!--                    &lt;!&ndash;                <span class="product-badge status-#{product.inventoryStatus.name().toLowerCase()}">#{product.inventoryStatus.text}</span>&ndash;&gt;-->
<!--                </div>-->
<!--                <div class="product-grid-item-content">-->
<!--                    <p id = 'productImge' class="image"><img src="${product.imageUrl}" alt="" style="width: 100%"/></p>-->
<!--                    <div class="product-name">#{product.name}</div>-->

<!--                </div>-->
<!--                <div>-->
<!--                    <div class="product-description">#{product.description}</div>-->
<!--                </div>-->
<!--                <div id = 'priceDetail' class="product-grid-item-bottom">-->
<!--                    <h:outputText value="#{product.price}" styleClass="product-price">-->
<!--                        <f:convertNumber currencySymbol="$" type="currency"/>-->
<!--                        <button style="text-align: center" type="button" onclick="addProductToCard(#{product.id})">add</button>-->
<!--                    </h:outputText>-->
<!--                    <div>-->
<!--                        <button style="text-align: center" type="button" onclick="addProductToCard(#{product.id})">add</button>-->
<!--                    </div>-->

<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </p:carousel>-->

<!--    <div class="product card">-->
<!--        <h:form>-->
<!--            <p:dataScroller value="#{productPublicController.all}" var="product" chunkSize="10" mode="inline"-->
<!--                            scrollHeight="500">-->
<!--                <f:facet name="header">-->
<!--                    Scroll Down to Load More Products-->
<!--                </f:facet>-->

<!--                <div class="product">-->
<!--                    <div class="product-list-item p-p-5">-->
<!--                        <p class="image"><img src="${product.imageUrl}" alt="" style="width: 10%"/></p>-->
<!--                        <div class="product-list-detail">-->
<!--                            <div class="product-name">#{product.name}</div>-->
<!--                            <div class="product-description">#{product.description}</div>-->

<!--                            <i class="pi pi-tag product-category-icon"/><span-->
<!--                                class="product-category">#{productCategory.name}</span>-->
<!--                        </div>-->
<!--                        <div class="product-list-action">-->
<!--                            <h:outputText value="#{product.price}" styleClass="product-price">-->
<!--                                <f:convertNumber currencySymbol="$" type="currency"/>-->
<!--                            </h:outputText>-->
<!--                            <button type="button" onclick="addProductToCard(#{product.id})">add</button>-->

<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </p:dataScroller>-->
<!--        </h:form>-->
<!--    </div>-->
</h:body>
<script>

     function addProductToCard(productId){
         card = window.localStorage.getItem('card');
         if (card == null){
             window.localStorage.setItem('card', productId);

         }else {
             window.localStorage.setItem('card', card + "," + productId);
         }
         console.log(window.localStorage.getItem('card'));
     }

</script>
</html>