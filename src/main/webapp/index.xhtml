<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
>

<h:head>

</h:head>
<style>
    #logo {
        width: 100px;
        padding: 20px;
        background-color: darkslategray;
        margin-left: 570px;
    }
</style>
<h:body>
    <ul>
        <ui:repeat value="#{categoryPublicController.parents}" var="category">
            <li>
                <h:link value="#{category.name}">
                    <f:param name="id" value="#{category.id}"/>
                </h:link>
                <ul>
                    <ui:repeat value="#{category.subcategories}" var="subCategory1Id"
                               rendered="#{not empty category.subcategories}">
                        <li>
                            <c:set var="subCategory1" value="#{categoryPublicController.get(subCategory1Id)}"/>
                            <h:link value="#{subCategory1.name}">
                            </h:link>
                        </li>
                    </ui:repeat>
                </ul>
            </li>
        </ui:repeat>
    </ul>

    <div class="product-list-container">
        <div class="product-box" style="width: 100px">
            <ui:repeat value="#{productPublicController.all}" var="product">
                <c:set var="productCategory" value="#{categoryPublicController.get(product.categoryId)}"/>
                <p class="name">#{product.name}</p>
                <p class="product-category">#{productCategory.name}</p>
                <p class="image"><img src="${product.imageUrl}" alt="" style="width: 100%"/></p>
                <p class="description">#{product.description}</p>
                <p class="price">#{product.price}</p>
                <p class="quantity">#{product.quantity}</p>
                <button type="button" onclick="addProductToCard(#{product.id})">add</button>
            </ui:repeat>
        </div>
    </div>

</h:body>
<script>
     function addProductToCard(productId){
         card = window.localStorage.getItem('card');
         if (card == null){
             window.localStorage.setItem('card', productId);

         }else {
             window.localStorage.setItem('card', card + "," + productId);
         }
         console.log(window.localStorage.getItem('card'));
     }
</script>
</html>